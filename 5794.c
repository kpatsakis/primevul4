  bool IsCapacityFull() const { return buf_.size() >= capacity_; }